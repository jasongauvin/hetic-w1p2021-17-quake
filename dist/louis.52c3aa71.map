{"version":3,"sources":["../node_modules/events/events.js","../node_modules/domain-browser/source/index.js","js/louis.js"],"names":["EventEmitter","_events","_maxListeners","undefined","module","exports","prototype","defaultMaxListeners","setMaxListeners","n","isNumber","isNaN","TypeError","emit","type","er","handler","len","args","i","listeners","error","isObject","length","arguments","Error","err","context","isUndefined","isFunction","call","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","arg","events","require","domain","createDomain","create","d","emitError","e","add","remove","bind","fn","intercept","run","dispose","enter","exit","tilemap","hero","lives","TileMap","grid","row","line","col","tile","oxo","elements","createElement","class","styles","height","width","top","left","appendTo","x","y","valx","Math","round","valy","getTile","classList","contains","Hero","oxoElement","animation","moveElementWithArrowKeys","document","querySelector","addEventListener","event","preventDefault","oxo_position","getPosition","distanceX","abs","clientX","distanceY","clientY","Bullet","amount","death","log","BadBoy","transform","utils","getRandomNumber","window","innerWidth","innerHeight","direction","changeDirection","moveInterval","setInterval","move","changeDirectionInterval","shootInterval","shoot","array","dir","clearInterval","destroyObj","posx","posy","isFire","traveldistance","burnTile","resetTile","killBullet","inputs","listenKey","screens","getCurrentScreen","loadScreen","startGame","displayLife","lifeNumber","innerHTML","setLinks","querySelectorAll","forEach","li","obj"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,YAAT,GAAwB;AACtB,OAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,OAAKC,aAAL,GAAqB,KAAKA,aAAL,IAAsBC,SAA3C;AACD;;AACDC,MAAM,CAACC,OAAP,GAAiBL,YAAjB,EAEA;;AACAA,YAAY,CAACA,YAAb,GAA4BA,YAA5B;AAEAA,YAAY,CAACM,SAAb,CAAuBL,OAAvB,GAAiCE,SAAjC;AACAH,YAAY,CAACM,SAAb,CAAuBJ,aAAvB,GAAuCC,SAAvC,EAEA;AACA;;AACAH,YAAY,CAACO,mBAAb,GAAmC,EAAnC,EAEA;AACA;;AACAP,YAAY,CAACM,SAAb,CAAuBE,eAAvB,GAAyC,UAASC,CAAT,EAAY;AACnD,MAAI,CAACC,QAAQ,CAACD,CAAD,CAAT,IAAgBA,CAAC,GAAG,CAApB,IAAyBE,KAAK,CAACF,CAAD,CAAlC,EACE,MAAMG,SAAS,CAAC,6BAAD,CAAf;AACF,OAAKV,aAAL,GAAqBO,CAArB;AACA,SAAO,IAAP;AACD,CALD;;AAOAT,YAAY,CAACM,SAAb,CAAuBO,IAAvB,GAA8B,UAASC,IAAT,EAAe;AAC3C,MAAIC,EAAJ,EAAQC,OAAR,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4BC,CAA5B,EAA+BC,SAA/B;AAEA,MAAI,CAAC,KAAKnB,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf,CAJyC,CAM3C;;AACA,MAAIa,IAAI,KAAK,OAAb,EAAsB;AACpB,QAAI,CAAC,KAAKb,OAAL,CAAaoB,KAAd,IACCC,QAAQ,CAAC,KAAKrB,OAAL,CAAaoB,KAAd,CAAR,IAAgC,CAAC,KAAKpB,OAAL,CAAaoB,KAAb,CAAmBE,MADzD,EACkE;AAChER,MAAAA,EAAE,GAAGS,SAAS,CAAC,CAAD,CAAd;;AACA,UAAIT,EAAE,YAAYU,KAAlB,EAAyB;AACvB,cAAMV,EAAN,CADuB,CACb;AACX,OAFD,MAEO;AACL;AACA,YAAIW,GAAG,GAAG,IAAID,KAAJ,CAAU,2CAA2CV,EAA3C,GAAgD,GAA1D,CAAV;AACAW,QAAAA,GAAG,CAACC,OAAJ,GAAcZ,EAAd;AACA,cAAMW,GAAN;AACD;AACF;AACF;;AAEDV,EAAAA,OAAO,GAAG,KAAKf,OAAL,CAAaa,IAAb,CAAV;AAEA,MAAIc,WAAW,CAACZ,OAAD,CAAf,EACE,OAAO,KAAP;;AAEF,MAAIa,UAAU,CAACb,OAAD,CAAd,EAAyB;AACvB,YAAQQ,SAAS,CAACD,MAAlB;AACE;AACA,WAAK,CAAL;AACEP,QAAAA,OAAO,CAACc,IAAR,CAAa,IAAb;AACA;;AACF,WAAK,CAAL;AACEd,QAAAA,OAAO,CAACc,IAAR,CAAa,IAAb,EAAmBN,SAAS,CAAC,CAAD,CAA5B;AACA;;AACF,WAAK,CAAL;AACER,QAAAA,OAAO,CAACc,IAAR,CAAa,IAAb,EAAmBN,SAAS,CAAC,CAAD,CAA5B,EAAiCA,SAAS,CAAC,CAAD,CAA1C;AACA;AACF;;AACA;AACEN,QAAAA,IAAI,GAAGa,KAAK,CAACzB,SAAN,CAAgB0B,KAAhB,CAAsBF,IAAtB,CAA2BN,SAA3B,EAAsC,CAAtC,CAAP;AACAR,QAAAA,OAAO,CAACiB,KAAR,CAAc,IAAd,EAAoBf,IAApB;AAdJ;AAgBD,GAjBD,MAiBO,IAAII,QAAQ,CAACN,OAAD,CAAZ,EAAuB;AAC5BE,IAAAA,IAAI,GAAGa,KAAK,CAACzB,SAAN,CAAgB0B,KAAhB,CAAsBF,IAAtB,CAA2BN,SAA3B,EAAsC,CAAtC,CAAP;AACAJ,IAAAA,SAAS,GAAGJ,OAAO,CAACgB,KAAR,EAAZ;AACAf,IAAAA,GAAG,GAAGG,SAAS,CAACG,MAAhB;;AACA,SAAKJ,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGF,GAAhB,EAAqBE,CAAC,EAAtB,EACEC,SAAS,CAACD,CAAD,CAAT,CAAac,KAAb,CAAmB,IAAnB,EAAyBf,IAAzB;AACH;;AAED,SAAO,IAAP;AACD,CArDD;;AAuDAlB,YAAY,CAACM,SAAb,CAAuB4B,WAAvB,GAAqC,UAASpB,IAAT,EAAeqB,QAAf,EAAyB;AAC5D,MAAIC,CAAJ;AAEA,MAAI,CAACP,UAAU,CAACM,QAAD,CAAf,EACE,MAAMvB,SAAS,CAAC,6BAAD,CAAf;AAEF,MAAI,CAAC,KAAKX,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf,CAP0D,CAS5D;AACA;;AACA,MAAI,KAAKA,OAAL,CAAaoC,WAAjB,EACE,KAAKxB,IAAL,CAAU,aAAV,EAAyBC,IAAzB,EACUe,UAAU,CAACM,QAAQ,CAACA,QAAV,CAAV,GACAA,QAAQ,CAACA,QADT,GACoBA,QAF9B;AAIF,MAAI,CAAC,KAAKlC,OAAL,CAAaa,IAAb,CAAL,EACE;AACA,SAAKb,OAAL,CAAaa,IAAb,IAAqBqB,QAArB,CAFF,KAGK,IAAIb,QAAQ,CAAC,KAAKrB,OAAL,CAAaa,IAAb,CAAD,CAAZ,EACH;AACA,SAAKb,OAAL,CAAaa,IAAb,EAAmBwB,IAAnB,CAAwBH,QAAxB,EAFG,KAIH;AACA,SAAKlC,OAAL,CAAaa,IAAb,IAAqB,CAAC,KAAKb,OAAL,CAAaa,IAAb,CAAD,EAAqBqB,QAArB,CAArB,CAxB0D,CA0B5D;;AACA,MAAIb,QAAQ,CAAC,KAAKrB,OAAL,CAAaa,IAAb,CAAD,CAAR,IAAgC,CAAC,KAAKb,OAAL,CAAaa,IAAb,EAAmByB,MAAxD,EAAgE;AAC9D,QAAI,CAACX,WAAW,CAAC,KAAK1B,aAAN,CAAhB,EAAsC;AACpCkC,MAAAA,CAAC,GAAG,KAAKlC,aAAT;AACD,KAFD,MAEO;AACLkC,MAAAA,CAAC,GAAGpC,YAAY,CAACO,mBAAjB;AACD;;AAED,QAAI6B,CAAC,IAAIA,CAAC,GAAG,CAAT,IAAc,KAAKnC,OAAL,CAAaa,IAAb,EAAmBS,MAAnB,GAA4Ba,CAA9C,EAAiD;AAC/C,WAAKnC,OAAL,CAAaa,IAAb,EAAmByB,MAAnB,GAA4B,IAA5B;AACAC,MAAAA,OAAO,CAACnB,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAKpB,OAAL,CAAaa,IAAb,EAAmBS,MAHjC;;AAIA,UAAI,OAAOiB,OAAO,CAACC,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACAD,QAAAA,OAAO,CAACC,KAAR;AACD;AACF;AACF;;AAED,SAAO,IAAP;AACD,CAhDD;;AAkDAzC,YAAY,CAACM,SAAb,CAAuBoC,EAAvB,GAA4B1C,YAAY,CAACM,SAAb,CAAuB4B,WAAnD;;AAEAlC,YAAY,CAACM,SAAb,CAAuBqC,IAAvB,GAA8B,UAAS7B,IAAT,EAAeqB,QAAf,EAAyB;AACrD,MAAI,CAACN,UAAU,CAACM,QAAD,CAAf,EACE,MAAMvB,SAAS,CAAC,6BAAD,CAAf;AAEF,MAAIgC,KAAK,GAAG,KAAZ;;AAEA,WAASC,CAAT,GAAa;AACX,SAAKC,cAAL,CAAoBhC,IAApB,EAA0B+B,CAA1B;;AAEA,QAAI,CAACD,KAAL,EAAY;AACVA,MAAAA,KAAK,GAAG,IAAR;AACAT,MAAAA,QAAQ,CAACF,KAAT,CAAe,IAAf,EAAqBT,SAArB;AACD;AACF;;AAEDqB,EAAAA,CAAC,CAACV,QAAF,GAAaA,QAAb;AACA,OAAKO,EAAL,CAAQ5B,IAAR,EAAc+B,CAAd;AAEA,SAAO,IAAP;AACD,CAnBD,EAqBA;;;AACA7C,YAAY,CAACM,SAAb,CAAuBwC,cAAvB,GAAwC,UAAShC,IAAT,EAAeqB,QAAf,EAAyB;AAC/D,MAAIY,IAAJ,EAAUC,QAAV,EAAoBzB,MAApB,EAA4BJ,CAA5B;AAEA,MAAI,CAACU,UAAU,CAACM,QAAD,CAAf,EACE,MAAMvB,SAAS,CAAC,6BAAD,CAAf;AAEF,MAAI,CAAC,KAAKX,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaa,IAAb,CAAtB,EACE,OAAO,IAAP;AAEFiC,EAAAA,IAAI,GAAG,KAAK9C,OAAL,CAAaa,IAAb,CAAP;AACAS,EAAAA,MAAM,GAAGwB,IAAI,CAACxB,MAAd;AACAyB,EAAAA,QAAQ,GAAG,CAAC,CAAZ;;AAEA,MAAID,IAAI,KAAKZ,QAAT,IACCN,UAAU,CAACkB,IAAI,CAACZ,QAAN,CAAV,IAA6BY,IAAI,CAACZ,QAAL,KAAkBA,QADpD,EAC+D;AAC7D,WAAO,KAAKlC,OAAL,CAAaa,IAAb,CAAP;AACA,QAAI,KAAKb,OAAL,CAAa6C,cAAjB,EACE,KAAKjC,IAAL,CAAU,gBAAV,EAA4BC,IAA5B,EAAkCqB,QAAlC;AAEH,GAND,MAMO,IAAIb,QAAQ,CAACyB,IAAD,CAAZ,EAAoB;AACzB,SAAK5B,CAAC,GAAGI,MAAT,EAAiBJ,CAAC,KAAK,CAAvB,GAA2B;AACzB,UAAI4B,IAAI,CAAC5B,CAAD,CAAJ,KAAYgB,QAAZ,IACCY,IAAI,CAAC5B,CAAD,CAAJ,CAAQgB,QAAR,IAAoBY,IAAI,CAAC5B,CAAD,CAAJ,CAAQgB,QAAR,KAAqBA,QAD9C,EACyD;AACvDa,QAAAA,QAAQ,GAAG7B,CAAX;AACA;AACD;AACF;;AAED,QAAI6B,QAAQ,GAAG,CAAf,EACE,OAAO,IAAP;;AAEF,QAAID,IAAI,CAACxB,MAAL,KAAgB,CAApB,EAAuB;AACrBwB,MAAAA,IAAI,CAACxB,MAAL,GAAc,CAAd;AACA,aAAO,KAAKtB,OAAL,CAAaa,IAAb,CAAP;AACD,KAHD,MAGO;AACLiC,MAAAA,IAAI,CAACE,MAAL,CAAYD,QAAZ,EAAsB,CAAtB;AACD;;AAED,QAAI,KAAK/C,OAAL,CAAa6C,cAAjB,EACE,KAAKjC,IAAL,CAAU,gBAAV,EAA4BC,IAA5B,EAAkCqB,QAAlC;AACH;;AAED,SAAO,IAAP;AACD,CA3CD;;AA6CAnC,YAAY,CAACM,SAAb,CAAuB4C,kBAAvB,GAA4C,UAASpC,IAAT,EAAe;AACzD,MAAIqC,GAAJ,EAAS/B,SAAT;AAEA,MAAI,CAAC,KAAKnB,OAAV,EACE,OAAO,IAAP,CAJuD,CAMzD;;AACA,MAAI,CAAC,KAAKA,OAAL,CAAa6C,cAAlB,EAAkC;AAChC,QAAItB,SAAS,CAACD,MAAV,KAAqB,CAAzB,EACE,KAAKtB,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAKA,OAAL,CAAaa,IAAb,CAAJ,EACH,OAAO,KAAKb,OAAL,CAAaa,IAAb,CAAP;AACF,WAAO,IAAP;AACD,GAbwD,CAezD;;;AACA,MAAIU,SAAS,CAACD,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,SAAK4B,GAAL,IAAY,KAAKlD,OAAjB,EAA0B;AACxB,UAAIkD,GAAG,KAAK,gBAAZ,EAA8B;AAC9B,WAAKD,kBAAL,CAAwBC,GAAxB;AACD;;AACD,SAAKD,kBAAL,CAAwB,gBAAxB;AACA,SAAKjD,OAAL,GAAe,EAAf;AACA,WAAO,IAAP;AACD;;AAEDmB,EAAAA,SAAS,GAAG,KAAKnB,OAAL,CAAaa,IAAb,CAAZ;;AAEA,MAAIe,UAAU,CAACT,SAAD,CAAd,EAA2B;AACzB,SAAK0B,cAAL,CAAoBhC,IAApB,EAA0BM,SAA1B;AACD,GAFD,MAEO,IAAIA,SAAJ,EAAe;AACpB;AACA,WAAOA,SAAS,CAACG,MAAjB,EACE,KAAKuB,cAAL,CAAoBhC,IAApB,EAA0BM,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAnC;AACH;;AACD,SAAO,KAAKtB,OAAL,CAAaa,IAAb,CAAP;AAEA,SAAO,IAAP;AACD,CAtCD;;AAwCAd,YAAY,CAACM,SAAb,CAAuBc,SAAvB,GAAmC,UAASN,IAAT,EAAe;AAChD,MAAIsC,GAAJ;AACA,MAAI,CAAC,KAAKnD,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaa,IAAb,CAAtB,EACEsC,GAAG,GAAG,EAAN,CADF,KAEK,IAAIvB,UAAU,CAAC,KAAK5B,OAAL,CAAaa,IAAb,CAAD,CAAd,EACHsC,GAAG,GAAG,CAAC,KAAKnD,OAAL,CAAaa,IAAb,CAAD,CAAN,CADG,KAGHsC,GAAG,GAAG,KAAKnD,OAAL,CAAaa,IAAb,EAAmBkB,KAAnB,EAAN;AACF,SAAOoB,GAAP;AACD,CATD;;AAWApD,YAAY,CAACM,SAAb,CAAuB+C,aAAvB,GAAuC,UAASvC,IAAT,EAAe;AACpD,MAAI,KAAKb,OAAT,EAAkB;AAChB,QAAIqD,UAAU,GAAG,KAAKrD,OAAL,CAAaa,IAAb,CAAjB;AAEA,QAAIe,UAAU,CAACyB,UAAD,CAAd,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,UAAU,CAAC/B,MAAlB;AACH;;AACD,SAAO,CAAP;AACD,CAVD;;AAYAvB,YAAY,CAACqD,aAAb,GAA6B,UAASE,OAAT,EAAkBzC,IAAlB,EAAwB;AACnD,SAAOyC,OAAO,CAACF,aAAR,CAAsBvC,IAAtB,CAAP;AACD,CAFD;;AAIA,SAASe,UAAT,CAAoB2B,GAApB,EAAyB;AACvB,SAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,SAAS9C,QAAT,CAAkB8C,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,SAASlC,QAAT,CAAkBkC,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;AACD;;AAED,SAAS5B,WAAT,CAAqB4B,GAArB,EAA0B;AACxB,SAAOA,GAAG,KAAK,KAAK,CAApB;AACD;;AC7SD;;AACA;AACA;;AAEApD,MAAM,CAACC,OAAP,GAAkB,YAAY;AAC7B;AACA,MAAIoD,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB,CAF6B,CAI7B;;;AACA,MAAIC,MAAM,GAAG,EAAb;;AACAA,EAAAA,MAAM,CAACC,YAAP,GAAsBD,MAAM,CAACE,MAAP,GAAgB,YAAY;AACjD,QAAIC,CAAC,GAAG,IAAIL,MAAM,CAACzD,YAAX,EAAR;;AAEA,aAAS+D,SAAT,CAAoBC,CAApB,EAAuB;AACtBF,MAAAA,CAAC,CAACjD,IAAF,CAAO,OAAP,EAAgBmD,CAAhB;AACA;;AAEDF,IAAAA,CAAC,CAACG,GAAF,GAAQ,UAAUV,OAAV,EAAmB;AAC1BA,MAAAA,OAAO,CAACb,EAAR,CAAW,OAAX,EAAoBqB,SAApB;AACA,KAFD;;AAGAD,IAAAA,CAAC,CAACI,MAAF,GAAW,UAAUX,OAAV,EAAmB;AAC7BA,MAAAA,OAAO,CAACT,cAAR,CAAuB,OAAvB,EAAgCiB,SAAhC;AACA,KAFD;;AAGAD,IAAAA,CAAC,CAACK,IAAF,GAAS,UAAUC,EAAV,EAAc;AACtB,aAAO,YAAY;AAClB,YAAIlD,IAAI,GAAGa,KAAK,CAACzB,SAAN,CAAgB0B,KAAhB,CAAsBF,IAAtB,CAA2BN,SAA3B,CAAX;;AACA,YAAI;AACH4C,UAAAA,EAAE,CAACnC,KAAH,CAAS,IAAT,EAAef,IAAf;AACA,SAFD,CAGA,OAAOQ,GAAP,EAAY;AACXqC,UAAAA,SAAS,CAACrC,GAAD,CAAT;AACA;AACD,OARD;AASA,KAVD;;AAWAoC,IAAAA,CAAC,CAACO,SAAF,GAAc,UAAUD,EAAV,EAAc;AAC3B,aAAO,UAAU1C,GAAV,EAAe;AACrB,YAAKA,GAAL,EAAW;AACVqC,UAAAA,SAAS,CAACrC,GAAD,CAAT;AACA,SAFD,MAGK;AACJ,cAAIR,IAAI,GAAGa,KAAK,CAACzB,SAAN,CAAgB0B,KAAhB,CAAsBF,IAAtB,CAA2BN,SAA3B,EAAsC,CAAtC,CAAX;;AACA,cAAI;AACH4C,YAAAA,EAAE,CAACnC,KAAH,CAAS,IAAT,EAAef,IAAf;AACA,WAFD,CAGA,OAAOQ,GAAP,EAAY;AACXqC,YAAAA,SAAS,CAACrC,GAAD,CAAT;AACA;AACD;AACD,OAbD;AAcA,KAfD;;AAgBAoC,IAAAA,CAAC,CAACQ,GAAF,GAAQ,UAAUF,EAAV,EAAc;AACrB,UAAI;AACHA,QAAAA,EAAE;AACF,OAFD,CAGA,OAAO1C,GAAP,EAAY;AACXqC,QAAAA,SAAS,CAACrC,GAAD,CAAT;AACA;;AACD,aAAO,IAAP;AACA,KARD;;AASAoC,IAAAA,CAAC,CAACS,OAAF,GAAY,YAAY;AACvB,WAAKrB,kBAAL;AACA,aAAO,IAAP;AACA,KAHD;;AAIAY,IAAAA,CAAC,CAACU,KAAF,GAAUV,CAAC,CAACW,IAAF,GAAS,YAAY;AAC9B,aAAO,IAAP;AACA,KAFD;;AAGA,WAAOX,CAAP;AACA,GAzDD;;AA0DA,SAAOH,MAAP;AACA,CAjEgB,CAiEd7B,IAjEc,CAiET,IAjES,CAAjB;;;;ACJA;;;;;;;;AAEA;AACA,IAAI4C,OAAJ;AACA,IAAIC,IAAJ;AACA,IAAIC,KAAJ,EAAW;AAEX;AAEA;AACA;;IACMC;;;AACF,qBAAc;AAAA;;AACV,SAAKC,IAAL,GAAY,IAAI/C,KAAJ,EAAZ,CADU,CACe;;AACzB,SAAI,IAAIgD,GAAG,GAAG,CAAd,EAAiBA,GAAG,GAAG,EAAvB,EAA2BA,GAAG,EAA9B,EAAkC;AAC9B,UAAIC,IAAI,GAAG,IAAIjD,KAAJ,EAAX;;AACA,WAAI,IAAIkD,GAAG,GAAG,CAAd,EAAiBA,GAAG,GAAG,EAAvB,EAA2BA,GAAG,EAA9B,EAAkC;AAC9B,YAAIC,IAAI,GAAGC,GAAG,CAACC,QAAJ,CAAaC,aAAb,CAA2B;AAClCvE,UAAAA,IAAI,EAAE,KAD4B;AAElCwE,UAAAA,KAAK,EAAE,MAF2B;AAGlCC,UAAAA,MAAM,EAAE;AACJC,YAAAA,MAAM,EAAE,MADJ;AAEJC,YAAAA,KAAK,EAAE,MAFH;AAGJC,YAAAA,GAAG,EAAET,GAAG,GAAG,EAAN,GAAW,IAHZ;AAIJU,YAAAA,IAAI,EAAEZ,GAAG,GAAG,EAAN,GAAW;AAJb,WAH0B;AASlCa,UAAAA,QAAQ,EAAE,UATwB,CASb;;AATa,SAA3B,CAAX;AAWAZ,QAAAA,IAAI,CAAC1C,IAAL,CAAU4C,IAAV;AACH;;AACD,WAAKJ,IAAL,CAAUxC,IAAV,CAAe0C,IAAf;AACH;AACJ,IAED;;;;;4BACQa,GAAGC,GAAE;AACT,UAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,CAAC,GAAC,EAAb,CAAX;AACA,UAAIK,IAAI,GAAGF,IAAI,CAACC,KAAL,CAAWH,CAAC,GAAC,EAAb,CAAX;AAEA,UAAId,IAAI,GAAG,KAAKF,IAAL,CAAUiB,IAAV,CAAX,CAJS,CAImB;;AAE5B,UAAGf,IAAI,IAAI,IAAX,EAAiB;AAAE;AACf,eAAO,IAAP;AACH,OAFD,MAEO;AACH,eAAOA,IAAI,CAACkB,IAAD,CAAX;AACH;AACJ;;;6BAEQL,GAAGC,GAAG;AACX,UAAIZ,IAAI,GAAG,KAAKiB,OAAL,CAAaN,CAAb,EAAgBC,CAAhB,CAAX;;AAEA,UAAGZ,IAAH,EAAQ;AAAE;AACN,YAAG,CAACA,IAAI,CAACkB,SAAL,CAAeC,QAAf,CAAwB,cAAxB,CAAJ,EAA6C;AACzCnB,UAAAA,IAAI,CAACkB,SAAL,CAAenC,GAAf,CAAmB,cAAnB;AACH;AACJ;AACJ;;;8BAES4B,GAAGC,GAAG;AACZ,UAAIZ,IAAI,GAAG,KAAKiB,OAAL,CAAaN,CAAb,EAAgBC,CAAhB,CAAX;;AAEA,UAAGZ,IAAH,EAAQ;AACJA,QAAAA,IAAI,CAACkB,SAAL,CAAelC,MAAf,CAAsB,cAAtB;AACH;AACJ;;;;;;IAGCoC;;;AACF,kBAAa;AAAA;;AAAA;;AACT,SAAK1B,KAAL,GAAa,CAAb;AACA,SAAK2B,UAAL,GAAkBpB,GAAG,CAACC,QAAJ,CAAaC,aAAb,CAA2B;AACzCvE,MAAAA,IAAI,EAAE,KADmC;AAEzCwE,MAAAA,KAAK,EAAE,MAFkC;AAGzCM,MAAAA,QAAQ,EAAE;AAH+B,KAA3B,CAAlB;AAKAT,IAAAA,GAAG,CAACqB,SAAJ,CAAcC,wBAAd,CAAuC,KAAKF,UAA5C,EAAwD,EAAxD,EAPS,CAST;;AACAG,IAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCC,gBAAnC,CAAoD,OAApD,EAA4D,UAACC,KAAD,EAAS;AAAE;AAEnE;AACAA,MAAAA,KAAK,CAACC,cAAN,GAHiE,CAIjE;;AACA,UAAIC,YAAY,GAAG5B,GAAG,CAACqB,SAAJ,CAAcQ,WAAd,CAA0B,KAAI,CAACT,UAA/B,CAAnB,CALiE,CAKH;AAE9D;;AACA,UAAIU,SAAS,GAAGjB,IAAI,CAACkB,GAAL,CAASH,YAAY,CAAClB,CAAb,GAAiBgB,KAAK,CAACM,OAAhC,CAAhB,CARiE,CAQR;;AACzD,UAAIC,SAAS,GAAGpB,IAAI,CAACkB,GAAL,CAASH,YAAY,CAACjB,CAAb,GAAiBe,KAAK,CAACQ,OAAhC,CAAhB;;AAEA,UAAGJ,SAAS,GAAGG,SAAf,EAAyB;AACrB,YAAGL,YAAY,CAAClB,CAAb,GAAiBgB,KAAK,CAACM,OAA1B,EAAkC;AAAE;AAChC,cAAIG,MAAJ,CAAWP,YAAY,CAAClB,CAAxB,EAA0BkB,YAAY,CAACjB,CAAvC,EAAyC,OAAzC,EAAiD,KAAjD;AACH,SAFD,MAEK;AACD,cAAIwB,MAAJ,CAAWP,YAAY,CAAClB,CAAxB,EAA0BkB,YAAY,CAACjB,CAAvC,EAAyC,MAAzC,EAAgD,KAAhD;AACH;AACJ,OAND,MAMK;AACD,YAAGiB,YAAY,CAACjB,CAAb,GAAiBe,KAAK,CAACQ,OAA1B,EAAkC;AAC9B,cAAIC,MAAJ,CAAWP,YAAY,CAAClB,CAAxB,EAA0BkB,YAAY,CAACjB,CAAvC,EAAyC,MAAzC,EAAgD,KAAhD;AACH,SAFD,MAEK;AACD,cAAIwB,MAAJ,CAAWP,YAAY,CAAClB,CAAxB,EAA0BkB,YAAY,CAACjB,CAAvC,EAAyC,IAAzC,EAA8C,KAA9C;AACH;AACJ;AAEJ,KAzBD;AA0BH;;;;+BAGUyB,QAAO;AAAC;AACf,WAAK3C,KAAL,IAAc2C,MAAd;;AACA,UAAG,KAAK3C,KAAL,IAAc,CAAjB,EAAmB;AACf,aAAK4C,KAAL;AACH;AACJ;;;4BAEM;AAAC;AACJhF,MAAAA,OAAO,CAACiF,GAAR,CAAY,WAAZ;AACH;;;;;;IAGCC;;;AACF,oBAAa;AAAA;;AAAA;;AACT,SAAKnB,UAAL,GAAkBpB,GAAG,CAACC,QAAJ,CAAaC,aAAb,CAA2B;AACzCvE,MAAAA,IAAI,EAAE,KADmC;AAEzCwE,MAAAA,KAAK,EAAE,QAFkC;AAGzCC,MAAAA,MAAM,EAAE;AACJoC,QAAAA,SAAS,EAAC;AACN,uBACAxC,GAAG,CAACyC,KAAJ,CAAUC,eAAV,CAA0B,CAA1B,EAA6BC,MAAM,CAACC,UAApC,CADA,GAEA,MAFA,GAGA5C,GAAG,CAACyC,KAAJ,CAAUC,eAAV,CAA0B,CAA1B,EAA6BC,MAAM,CAACE,WAApC,CAHA,GAIA;AANA,OAHiC;AAWzCpC,MAAAA,QAAQ,EAAE;AAX+B,KAA3B,CAAlB,CADS,CAeT;AAEA;;AACA,SAAKqC,SAAL,GAAiB,MAAjB;AACA,SAAKC,eAAL,GAnBS,CAqBT;;AACA,SAAKC,YAAL,GAAoBC,WAAW,CAAE,YAAK;AAAE,MAAA,MAAI,CAACC,IAAL;AAAa,KAAtB,EAAuB,EAAvB,CAA/B,CAtBS,CAwBT;;AACA,SAAKC,uBAAL,GAA+BF,WAAW,CAAE,YAAM;AAAE,MAAA,MAAI,CAACF,eAAL;AAAwB,KAAlC,EAAmC,IAAnC,CAA1C;AAEA,SAAKK,aAAL,GAAqBH,WAAW,CAAC,YAAI;AAAE,MAAA,MAAI,CAACI,KAAL;AAAc,KAArB,EAAsB,IAAtB,CAAhC;AACH,IAED;;;;;2BACM;AACF,UAAG,KAAKP,SAAL,IAAkB,MAArB,EAA4B;AAAE;AAC1B9C,QAAAA,GAAG,CAACqB,SAAJ,CAAc6B,IAAd,CAAmB,KAAK9B,UAAxB,EAAoC,KAAK0B,SAAzC,EAAoD,CAApD,EADwB,CACgC;AAC3D;AACJ,MAED;;;;sCACiB;AACb,UAAMQ,KAAK,GAAG,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,OAAvB,CAAd;AACA,WAAKR,SAAL,GAAiBQ,KAAK,CAACtD,GAAG,CAACyC,KAAJ,CAAUC,eAAV,CAA0B,CAA1B,EAA6BY,KAAK,CAAClH,MAAN,GAAa,CAA1C,CAAD,CAAtB;AACH;;;4BAEM;AACH,UAAIwF,YAAY,GAAG5B,GAAG,CAACqB,SAAJ,CAAcQ,WAAd,CAA0B,KAAKT,UAA/B,CAAnB,CADG,CAC4D;;AAC/D,UAAMkC,KAAK,GAAG,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,OAAvB,CAAd;AACA,UAAIC,GAAG,GAAGD,KAAK,CAACtD,GAAG,CAACyC,KAAJ,CAAUC,eAAV,CAA0B,CAA1B,EAA6BY,KAAK,CAAClH,MAAN,GAAa,CAA1C,CAAD,CAAf;AACA,UAAI+F,MAAJ,CAAWP,YAAY,CAAClB,CAAxB,EAA0BkB,YAAY,CAACjB,CAAvC,EAAyC4C,GAAzC,EAA6C,IAA7C;AACH,MAED;;;;4BACO;AACHC,MAAAA,aAAa,CAAC,KAAKR,YAAN,CAAb,CADG,CAC+B;;AAClCQ,MAAAA,aAAa,CAAC,KAAKL,uBAAN,CAAb;AACAK,MAAAA,aAAa,CAAC,KAAKJ,aAAN,CAAb;AACA,WAAKhC,UAAL,CAAgBrC,MAAhB,GAJG,CAIsB;;AACzB0E,MAAAA,UAAU,CAAC,IAAD,CAAV,CALG,CAKc;AACpB;;;;KAGL;;;IACMtB;;;AACF,kBAAYuB,IAAZ,EAAiBC,IAAjB,EAAsBb,SAAtB,EAAgCc,MAAhC,EAAuC;AAAA;;AAAA;;AAEnC,SAAKxC,UAAL,GAAkBpB,GAAG,CAACC,QAAJ,CAAaC,aAAb,CAA2B;AACzCvE,MAAAA,IAAI,EAAE,KADmC;AAEzCwE,MAAAA,KAAK,EAAEyD,MAAM,GAAG,UAAH,GAAgB,WAFY;AAGzCxD,MAAAA,MAAM,EAAE;AACJoC,QAAAA,SAAS,EACL,eACIkB,IADJ,GAEA,MAFA,GAGIC,IAHJ,GAIA;AANA,OAHiC;AAWzClD,MAAAA,QAAQ,EAAE;AAX+B,KAA3B,CAAlB;AAcA,SAAKqC,SAAL,GAAiBA,SAAjB;AACA,SAAKc,MAAL,GAAcA,MAAd,CAjBmC,CAmBnC;;AACA,SAAKC,cAAL,GAAsB,CAAtB;AAEA,SAAKb,YAAL,GAAoBC,WAAW,CAAC,YAAI;AAAC,MAAA,MAAI,CAACC,IAAL;AAAY,KAAlB,EAAmB,EAAnB,CAA/B,CAtBmC,CAsBmB;AACzD;;;;2BAEK;AAAC;AACH,WAAKW,cAAL,IAAuB,EAAvB;AACA7D,MAAAA,GAAG,CAACqB,SAAJ,CAAc6B,IAAd,CAAmB,KAAK9B,UAAxB,EAAoC,KAAK0B,SAAzC,EAAoD,EAApD,EAFE,CAEsD;;AAExD,UAAIlB,YAAY,GAAG5B,GAAG,CAACqB,SAAJ,CAAcQ,WAAd,CAA0B,KAAKT,UAA/B,CAAnB,CAJE,CAI4D;;AAE9D,UAAG,KAAKwC,MAAR,EACIrE,OAAO,CAACuE,QAAR,CAAiBlC,YAAY,CAAClB,CAA9B,EAAgCkB,YAAY,CAACjB,CAA7C,EADJ,KAGIpB,OAAO,CAACwE,SAAR,CAAkBnC,YAAY,CAAClB,CAA/B,EAAiCkB,YAAY,CAACjB,CAA9C;;AAEJ,UAAG,KAAKkD,cAAL,GAAsB,GAAzB,EAA6B;AAAC;AAC1B,aAAKG,UAAL;AACH;AACJ;;;iCAEW;AACRR,MAAAA,aAAa,CAAC,KAAKR,YAAN,CAAb;AACA,WAAK5B,UAAL,CAAgBrC,MAAhB;AACA0E,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH;;;;KAGL;AAEA;;;AACAzD,GAAG,CAACiE,MAAJ,CAAWC,SAAX,CAAqB,OAArB,EAA8B,YAAW;AACrC,MAAIlE,GAAG,CAACmE,OAAJ,CAAYC,gBAAZ,OAAmC,EAAvC,EAA2C;AACvCpE,IAAAA,GAAG,CAACmE,OAAJ,CAAYE,UAAZ,CAAuB,MAAvB,EAA+BC,SAA/B;AACH;AACJ,CAJD,GAMA;;AACA,SAASA,SAAT,GAAqB;AACjB/E,EAAAA,OAAO,GAAG,IAAIG,OAAJ,EAAV;AACAF,EAAAA,IAAI,GAAG,IAAI2B,IAAJ,EAAP;AAGA8B,EAAAA,WAAW,CAAC,YAAU;AAAC,QAAIV,MAAJ;AAAa,GAAzB,EAA0B,IAA1B,CAAX,CALiB,CAK0B;;AAI3C9C,EAAAA,KAAK,GAAG8B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAR;AACA+C,EAAAA,WAAW,CAAC/E,IAAI,CAACC,KAAN,CAAX;AACH;;AAAA,EAED;;AACA,SAAS8E,WAAT,CAAqBC,UAArB,EAAiC;AAC7B/E,EAAAA,KAAK,CAACgF,SAAN,GAAkB,EAAlB;;AACA,OAAK,IAAIzI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwI,UAApB,EAAgCxI,CAAC,EAAjC,EAAoC;AAChCyD,IAAAA,KAAK,CAACgF,SAAN,IAAmB,IAAnB,CADgC,CACT;AAC1B;AACJ;;AAGD,SAASC,QAAT,GAAoB;AAAC;AACrBnD,EAAAA,QAAQ,CACHoD,gBADL,CACsB,IADtB,EAEKC,OAFL,CAEa,UAASC,EAAT,EAAa;AACtBA,IAAAA,EAAE,CAACpD,gBAAH,CAAoB,OAApB,EAA6B,YAAW;AACpCzB,MAAAA,GAAG,CAACmE,OAAJ,CAAYE,UAAZ,CAAuB,KAAKI,SAA5B,EAAuC,YAAW;AAClDC,QAAAA,QAAQ;AACP,OAFD;AAGH,KAJD;AAKC,GARL;AASC;;AAED1E,GAAG,CAACmE,OAAJ,CAAYE,UAAZ,CAAuB,MAAvB,EAA+B,YAAW;AACtCK,EAAAA,QAAQ;AACX,CAFD,GAKA;;AACA,SAASjB,UAAT,CAAoBqB,GAApB,EAAwB;AACpBA,EAAAA,GAAG,GAAG,IAAN;AACH","file":"louis.52c3aa71.map","sourceRoot":"..\\src","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// This file should be ES5 compatible\n/* eslint prefer-spread:0, no-var:0, prefer-reflect:0, no-magic-numbers:0 */\n'use strict'\n\nmodule.exports = (function () {\n\t// Import Events\n\tvar events = require('events')\n\n\t// Export Domain\n\tvar domain = {}\n\tdomain.createDomain = domain.create = function () {\n\t\tvar d = new events.EventEmitter()\n\n\t\tfunction emitError (e) {\n\t\t\td.emit('error', e)\n\t\t}\n\n\t\td.add = function (emitter) {\n\t\t\temitter.on('error', emitError)\n\t\t}\n\t\td.remove = function (emitter) {\n\t\t\temitter.removeListener('error', emitError)\n\t\t}\n\t\td.bind = function (fn) {\n\t\t\treturn function () {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments)\n\t\t\t\ttry {\n\t\t\t\t\tfn.apply(null, args)\n\t\t\t\t}\n\t\t\t\tcatch (err) {\n\t\t\t\t\temitError(err)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\td.intercept = function (fn) {\n\t\t\treturn function (err) {\n\t\t\t\tif ( err ) {\n\t\t\t\t\temitError(err)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar args = Array.prototype.slice.call(arguments, 1)\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfn.apply(null, args)\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\temitError(err)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\td.run = function (fn) {\n\t\t\ttry {\n\t\t\t\tfn()\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\temitError(err)\n\t\t\t}\n\t\t\treturn this\n\t\t}\n\t\td.dispose = function () {\n\t\t\tthis.removeAllListeners()\n\t\t\treturn this\n\t\t}\n\t\td.enter = d.exit = function () {\n\t\t\treturn this\n\t\t}\n\t\treturn d\n\t}\n\treturn domain\n}).call(this)\n","import { create } from \"domain\";\r\n\r\n//Var main elements\r\nlet tilemap;\r\nlet hero;\r\nlet lives; //TODO a refaire (interface)\r\n\r\n//-----MODELS-----//\r\n\r\n//Classe TileMap\r\n//TODO statistiques pour que la partie perde si toute la map est cramée (créer une méthode -> cramée / total des tiles)\r\nclass TileMap {\r\n    constructor() {\r\n        this.grid = new Array(); //create an array (of arrays) to interact with\r\n        for(let row = 0; row < 38; row++) {\r\n            let line = new Array();\r\n            for(let col = 0; col < 18; col++) {\r\n                var tile = oxo.elements.createElement({\r\n                    type: 'div',\r\n                    class: 'tile',\r\n                    styles: {\r\n                        height: '40px',\r\n                        width: '40px',\r\n                        top: col * 40 + 'px',\r\n                        left: row * 40 + 'px'\r\n                    },\r\n                    appendTo: '.contain' // optional\r\n                });\r\n                line.push(tile);\r\n            }\r\n            this.grid.push(line);\r\n        }\r\n    }\r\n\r\n    // méthode pour accéder à une tile (utilisée par la fonction move de bullet)\r\n    getTile(x, y){\r\n        let valx = Math.round(x/40);\r\n        let valy = Math.round(y/40);\r\n\r\n        let line = this.grid[valx]; //line désigne l'axe x concerné\r\n\r\n        if(line == null) { //sécurité en cas de outofindex\r\n            return null;\r\n        } else {\r\n            return line[valy];\r\n        }\r\n    }\r\n\r\n    burnTile(x, y) {\r\n        let tile = this.getTile(x, y);\r\n\r\n        if(tile){ //!null et !undefined (sécurité)\r\n            if(!tile.classList.contains(\"tile--burned\")) {\r\n                tile.classList.add(\"tile--burned\");\r\n            }\r\n        }\r\n    }\r\n\r\n    resetTile(x, y) {\r\n        let tile = this.getTile(x, y);\r\n\r\n        if(tile){\r\n            tile.classList.remove(\"tile--burned\");\r\n        }\r\n    }\r\n}\r\n\r\nclass Hero{\r\n    constructor(){\r\n        this.lives = 3;\r\n        this.oxoElement = oxo.elements.createElement({\r\n            type: 'div',\r\n            class: 'hero',\r\n            appendTo: '.contain'\r\n        });\r\n        oxo.animation.moveElementWithArrowKeys(this.oxoElement, 20);\r\n        \r\n        //\"Viser pour tirer\"\r\n        document.querySelector(\".contain\").addEventListener(\"click\",(event)=>{ //fat arrow pour ne pas changeer de scope\r\n\r\n            //previens le comportement de base du click (selection etc... sécurité)\r\n            event.preventDefault();\r\n            //TODO Attention la position correspond au coin gauche superieur et non au centre du sprite (/!\\ petit bug)\r\n            let oxo_position = oxo.animation.getPosition(this.oxoElement);// calculs à rajouter pour centrer\r\n\r\n            //choisir en cas de diagonale\r\n            let distanceX = Math.abs(oxo_position.x - event.clientX);//event.clientX retourne la position de la souris sur l'axe X (pareil pour Y)\r\n            let distanceY = Math.abs(oxo_position.y - event.clientY);\r\n\r\n            if(distanceX > distanceY){\r\n                if(oxo_position.x < event.clientX){ //décicder entre la gauche et la droite\r\n                    new Bullet(oxo_position.x,oxo_position.y,\"right\",false);\r\n                }else{\r\n                    new Bullet(oxo_position.x,oxo_position.y,\"left\",false);\r\n                }\r\n            }else{\r\n                if(oxo_position.y < event.clientY){\r\n                    new Bullet(oxo_position.x,oxo_position.y,\"down\",false);\r\n                }else{\r\n                    new Bullet(oxo_position.x,oxo_position.y,\"up\",false);\r\n                }\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n    takeDamage(amount){//TODO fonction non encore utilisée -> à rajouter avec les collisions du feu etc.\r\n        this.lives -= amount;\r\n        if(this.lives <= 0){\r\n            this.death();\r\n        }\r\n    }\r\n\r\n    death(){//idem\r\n        console.log(\"Game Over\");\r\n    }\r\n}\r\n\r\nclass BadBoy{\r\n    constructor(){\r\n        this.oxoElement = oxo.elements.createElement({\r\n            type: 'div',\r\n            class: 'badboy',\r\n            styles: {\r\n                transform://TODO faire spawner sur les côtés plutôt que partout (/!\\ mais appliquer cette fonction sur les bonus)\r\n                    'translate(' +\r\n                    oxo.utils.getRandomNumber(0, window.innerWidth) +\r\n                    'px, ' +\r\n                    oxo.utils.getRandomNumber(0, window.innerHeight) +\r\n                    'px)',\r\n            },\r\n            appendTo: '.contain'\r\n        });\r\n\r\n        //Movement\r\n\r\n        //initialise direction de depart puis randomise\r\n        this.direction = \"none\";\r\n        this.changeDirection();\r\n\r\n        //se deplace toute les 50ms\r\n        this.moveInterval = setInterval( () =>{ this.move() },50);\r\n\r\n        //change de direction toute les 2000ms\r\n        this.changeDirectionInterval = setInterval( () => { this.changeDirection() },2000);\r\n\r\n        this.shootInterval = setInterval(()=>{ this.shoot() },2000);\r\n    }\r\n\r\n    //Move the enemy\r\n    move(){\r\n        if(this.direction != \"none\"){ //au cas où\r\n            oxo.animation.move(this.oxoElement, this.direction, 5); // Move 5px\r\n        }\r\n    }\r\n\r\n    // Change the direction\r\n    changeDirection(){\r\n        const array = ['up', 'down', 'left', 'right'];\r\n        this.direction = array[oxo.utils.getRandomNumber(0, array.length-1)];\r\n    }\r\n\r\n    shoot(){\r\n        let oxo_position = oxo.animation.getPosition(this.oxoElement); //position initiale\r\n        const array = ['up', 'down', 'left', 'right'];\r\n        let dir = array[oxo.utils.getRandomNumber(0, array.length-1)];\r\n        new Bullet(oxo_position.x,oxo_position.y,dir,true);\r\n    }\r\n\r\n    //TODO: A relier au collision avec les balles\r\n    death(){\r\n        clearInterval(this.moveInterval); //il ne faut pas oublier de clear tous les interval quand on détruit un objet !! (ex. pour les bonus)\r\n        clearInterval(this.changeDirectionInterval);\r\n        clearInterval(this.shootInterval);\r\n        this.oxoElement.remove();//supprimer du HTML\r\n        destroyObj(this);//set this à null (cf fin du code)\r\n    }\r\n}\r\n\r\n// Balle d'eau ou de feu\r\nclass Bullet{\r\n    constructor(posx,posy,direction,isFire){\r\n\r\n        this.oxoElement = oxo.elements.createElement({\r\n            type: 'div',\r\n            class: isFire ? \"fireball\" : \"waterball\",\r\n            styles: {\r\n                transform:\r\n                    'translate(' +\r\n                        posx +\r\n                    'px, ' +\r\n                        posy +\r\n                    'px)',\r\n            },\r\n            appendTo: '.contain'\r\n        });\r\n        \r\n        this.direction = direction;\r\n        this.isFire = isFire;\r\n\r\n        // distance parcourue\r\n        this.traveldistance = 0;\r\n\r\n        this.moveInterval = setInterval(()=>{this.move()},50);//50ms\r\n    }\r\n\r\n    move(){// \"déplacement\" de la balle\r\n        this.traveldistance += 10;\r\n        oxo.animation.move(this.oxoElement, this.direction, 10);//10px\r\n\r\n        let oxo_position = oxo.animation.getPosition(this.oxoElement);//TODO Idem prblm centrer\r\n\r\n        if(this.isFire)\r\n            tilemap.burnTile(oxo_position.x,oxo_position.y);\r\n        else\r\n            tilemap.resetTile(oxo_position.x,oxo_position.y);\r\n\r\n        if(this.traveldistance > 500){//distance maximum à parcourir 500px\r\n            this.killBullet();\r\n        }\r\n    }\r\n\r\n    killBullet(){\r\n        clearInterval(this.moveInterval);\r\n        this.oxoElement.remove();\r\n        destroyObj(this);\r\n    }\r\n}\r\n\r\n//Fonctions\r\n\r\n// Entrer dans le jeu après avoir tapé enter\r\noxo.inputs.listenKey('enter', function() {\r\n    if (oxo.screens.getCurrentScreen() === '') {\r\n        oxo.screens.loadScreen('game', startGame)\r\n    }\r\n})\r\n\r\n//Game init\r\nfunction startGame() {\r\n    tilemap = new TileMap();\r\n    hero = new Hero();\r\n\r\n\r\n    setInterval(function(){new BadBoy()},5000);//un badboy sauvage apparaît toutes les 5sec\r\n\r\n\r\n\r\n    lives = document.querySelector('.lives');\r\n    displayLife(hero.lives);\r\n};\r\n\r\n//fonction nombre de vie\r\nfunction displayLife(lifeNumber) {\r\n    lives.innerHTML = '';\r\n    for (var i = 0; i < lifeNumber; i++){\r\n        lives.innerHTML += \"<3\"//TODO à modifier (sprites)\r\n    }\r\n}\r\n\r\n\r\nfunction setLinks() {//TODO modifier les links et virer la div 'ul' (utiliser les boutons etc.)\r\ndocument\r\n    .querySelectorAll(\"li\")\r\n    .forEach(function(li) {\r\n    li.addEventListener(\"click\", function() {\r\n        oxo.screens.loadScreen(this.innerHTML, function() {\r\n        setLinks()\r\n        })\r\n    })\r\n    })\r\n}\r\n\r\noxo.screens.loadScreen('home', function() {\r\n    setLinks()\r\n});\r\n\r\n\r\n//SET objects to null\r\nfunction destroyObj(obj){\r\n    obj = null;\r\n}\r\n"]}