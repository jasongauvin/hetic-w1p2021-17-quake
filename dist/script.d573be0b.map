{"version":3,"sources":["js/script.js"],"names":["tilemap","hero","livesEl","badboys","TileMap","grid","Array","row","line","col","tile","oxo","elements","createElement","type","class","styles","height","width","top","left","appendTo","push","x","y","valx","Math","round","valy","getTile","classList","contains","add","remove","player","addToScore","Hero","lives","oxoElement","animation","moveElementWithArrowKeys","document","querySelector","addEventListener","event","preventDefault","oxo_position","getPosition","distanceX","abs","clientX","distanceY","clientY","Bullet","BadBoy","transform","utils","getRandomNumber","window","innerWidth","innerHeight","direction","changeDirection","moveInterval","setInterval","move","changeDirectionInterval","shootInterval","shoot","onCollisionWithElement","displayLife","screens","loadScreen","death","array","length","dir","posx","posy","isFire","forEach","badboy","clearInterval","destroyObj","traveldistance","burnTile","resetTile","killBullet","inputs","listenKey","getCurrentScreen","startGame","setScore","lifeNumber","innerHTML","i","setLinks","countTiliBurned","querySelectorAll","getScore","obj"],"mappings":"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","file":"script.d573be0b.map","sourceRoot":"..\\src","sourcesContent":["//Var main elements\r\nlet tilemap;\r\nlet hero;\r\nlet livesEl;\r\nlet badboys = [];\r\n\r\n//-----OBJECTS-----//\r\n\r\n//TILEMAP CLASS//\r\nclass TileMap {\r\n  constructor() {\r\n    this.grid = new Array(); //create an array (of arrays) to interact with\r\n    for (let row = 0; row < 38; row++) {\r\n      //create the map\r\n      let line = new Array();\r\n      for (let col = 0; col < 18; col++) {\r\n        var tile = oxo.elements.createElement({\r\n          type: \"div\",\r\n          class: \"tile\",\r\n          styles: {\r\n            height: \"40px\",\r\n            width: \"40px\",\r\n            top: col * 40 + \"px\",\r\n            left: row * 40 + \"px\"\r\n          },\r\n          appendTo: \".map\"\r\n        });\r\n        line.push(tile);\r\n      }\r\n      this.grid.push(line);\r\n    }\r\n  }\r\n\r\n  // method to get a tile (after burnTile or resetTile)\r\n  getTile(x, y) {\r\n    let valx = Math.round(x / 40);\r\n    let valy = Math.round(y / 40);\r\n\r\n    let line = this.grid[valx]; //line is the x axe\r\n\r\n    if (line == null) {\r\n      //security in case of outofindex\r\n      return null;\r\n    } else {\r\n      return line[valy];\r\n    }\r\n  }\r\n  //tile--burned\r\n  burnTile(x, y) {\r\n    let tile = this.getTile(x, y);\r\n\r\n    if (tile) {\r\n      //!null and !undefined (security)\r\n      if (!tile.classList.contains(\"tile--burned\")) {\r\n        tile.classList.add(\"tile--burned\");\r\n      }\r\n    }\r\n  }\r\n  //reset tile\r\n  resetTile(x, y) {\r\n    let tile = this.getTile(x, y);\r\n    if (tile && tile.classList.contains(\"tile--burned\")) {\r\n      tile.classList.remove(\"tile--burned\");\r\n      oxo.player.addToScore(100);\r\n    }\r\n  }\r\n}\r\n\r\n//HERO CLASS//\r\nclass Hero {\r\n  constructor() {\r\n    this.lives = 5;\r\n    this.oxoElement = oxo.elements.createElement({\r\n      type: \"div\",\r\n      class: \"hero\",\r\n      appendTo: \".map\"\r\n    });\r\n\r\n    oxo.animation.moveElementWithArrowKeys(this.oxoElement, 20);\r\n\r\n    //method to target and shoot\r\n    document.querySelector(\".contain\").addEventListener(\"click\", event => {\r\n      //fat arrow to stay in the correct scope\r\n\r\n      event.preventDefault(); //security to remove the click behaviour (select, etc.)\r\n      let oxo_position = oxo.animation.getPosition(this.oxoElement);\r\n\r\n      //choose in case of diagonal\r\n      let distanceX = Math.abs(oxo_position.x - event.clientX); //event.clientX return the cursor position (on X)\r\n      let distanceY = Math.abs(oxo_position.y - event.clientY); //event.clientY return the cursor position (on Y)\r\n\r\n      if (distanceX > distanceY) {\r\n        //decide between left and right\r\n        if (oxo_position.x < event.clientX) {\r\n          new Bullet(oxo_position.x, oxo_position.y, \"right\", false);\r\n        } else {\r\n          new Bullet(oxo_position.x, oxo_position.y, \"left\", false);\r\n        }\r\n      } else {\r\n        if (oxo_position.y < event.clientY) {\r\n          new Bullet(oxo_position.x, oxo_position.y, \"down\", false);\r\n        } else {\r\n          new Bullet(oxo_position.x, oxo_position.y, \"up\", false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n//BADBOY CLASS//\r\nclass BadBoy {\r\n  constructor() {\r\n    this.oxoElement = oxo.elements.createElement({\r\n      type: \"div\",\r\n      class: \"badboy\",\r\n      styles: {\r\n        transform:\r\n          \"translate(\" +\r\n          oxo.utils.getRandomNumber(0, window.innerWidth) +\r\n          \"px, \" +\r\n          oxo.utils.getRandomNumber(0, window.innerHeight) +\r\n          \"px)\"\r\n      },\r\n      appendTo: \".map\"\r\n    });\r\n\r\n    badboys.push(this);\r\n\r\n    //Movement//\r\n\r\n    //initialize the direction, then randomize\r\n    this.direction = \"none\";\r\n    this.changeDirection();\r\n\r\n    //move every 100ms\r\n    this.moveInterval = setInterval(() => {\r\n      this.move();\r\n    }, 100);\r\n\r\n    //change the direction every 2000ms\r\n    this.changeDirectionInterval = setInterval(() => {\r\n      this.changeDirection();\r\n    }, 2000);\r\n\r\n    this.shootInterval = setInterval(() => {\r\n      this.shoot();\r\n    }, 4000);\r\n\r\n    //cause damage when colliding with hero\r\n    oxo.elements.onCollisionWithElement(\r\n      hero.oxoElement,\r\n      this.oxoElement,\r\n      function() {\r\n        displayLife(--hero.lives);\r\n        if (hero.lives === 0) {\r\n          oxo.screens.loadScreen(\"end\", death);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  //Move the enemy\r\n  move() {\r\n    if (this.direction != \"none\") {\r\n      //security\r\n      oxo.animation.move(this.oxoElement, this.direction, 5); // Move 5px\r\n    }\r\n  }\r\n\r\n  // Change the direction\r\n  changeDirection() {\r\n    const array = [\"up\", \"down\", \"left\", \"right\"];\r\n    this.direction = array[oxo.utils.getRandomNumber(0, array.length - 1)];\r\n  }\r\n\r\n  // shoot randomly\r\n  shoot() {\r\n    let oxo_position = oxo.animation.getPosition(this.oxoElement); //initial position\r\n    const array = [\"up\", \"down\", \"left\", \"right\"];\r\n    let dir = array[oxo.utils.getRandomNumber(0, array.length - 1)];\r\n    new Bullet(oxo_position.x, oxo_position.y, dir, true);\r\n  }\r\n}\r\n\r\n//BULLET CLASS - FIREBALL OR WATERBALL//\r\nclass Bullet {\r\n  constructor(posx, posy, direction, isFire) {\r\n    this.oxoElement = oxo.elements.createElement({\r\n      type: \"div\",\r\n      class: isFire ? \"fireball\" : \"waterball\",\r\n      styles: {\r\n        transform: \"translate(\" + posx + \"px, \" + posy + \"px)\"\r\n      },\r\n      appendTo: \".map\"\r\n    });\r\n\r\n    this.direction = direction;\r\n    this.isFire = isFire;\r\n\r\n    //Target of the bullet\r\n    //Hero is touched\r\n    if (isFire) {\r\n      oxo.elements.onCollisionWithElement(\r\n        this.oxoElement,\r\n        hero.oxoElement,\r\n        function() {\r\n          displayLife(--hero.lives);\r\n          if (hero.lives === 0) {\r\n            oxo.screens.loadScreen(\"end\", death);\r\n          }\r\n        }\r\n      );\r\n      //Badboy is dead\r\n    } else {\r\n      badboys.forEach(badboy => {\r\n        oxo.elements.onCollisionWithElement(\r\n          this.oxoElement,\r\n          badboy.oxoElement,\r\n          function() {\r\n            oxo.player.addToScore(150);\r\n            badboy.oxoElement.remove();\r\n            clearInterval(badboy.moveInterval); //do not forget to clear all intervals when destroying an object\r\n            clearInterval(badboy.changeDirectionInterval);\r\n            clearInterval(badboy.shootInterval);\r\n            badboy.oxoElement.remove(); //remove from HTML\r\n            destroyObj(this); //set it to null (end of code)\r\n          }\r\n        );\r\n      });\r\n    }\r\n\r\n    // Prevent infinite travel distance\r\n    this.traveldistance = 0;\r\n\r\n    this.moveInterval = setInterval(\r\n      () => {\r\n        this.move();\r\n      },\r\n      50,\r\n      true\r\n    ); //50ms\r\n  }\r\n\r\n  move() {\r\n    // \"movement\" of the bullet\r\n    this.traveldistance += 10;\r\n    oxo.animation.move(this.oxoElement, this.direction, 10); //10px\r\n\r\n    let oxo_position = oxo.animation.getPosition(this.oxoElement);\r\n\r\n    if (this.isFire) tilemap.burnTile(oxo_position.x, oxo_position.y);\r\n    //interaction with the map\r\n    else tilemap.resetTile(oxo_position.x, oxo_position.y);\r\n\r\n    if (this.traveldistance > 500) {\r\n      //max distance is 500 px\r\n      this.killBullet();\r\n    }\r\n  }\r\n\r\n  killBullet() {\r\n    clearInterval(this.moveInterval);\r\n    this.oxoElement.remove();\r\n    destroyObj(this);\r\n  }\r\n}\r\n\r\n//-----FONCTIONS-----//\r\n\r\n// Start the game when pressing enter\r\noxo.inputs.listenKey(\"enter\", function() {\r\n  if (oxo.screens.getCurrentScreen() === \"\") {\r\n    oxo.screens.loadScreen(\"game\", startGame);\r\n  }\r\n});\r\n\r\n//Game init\r\nfunction startGame() {\r\n  tilemap = new TileMap();\r\n  hero = new Hero();\r\n  oxo.player.setScore(0);\r\n\r\n  setInterval(function() {\r\n    new BadBoy();\r\n  }, 3000); //a wild badboy appears every 3s\r\n\r\n  livesEl = document.querySelector(\".lives\");\r\n  displayLife(hero.lives);\r\n\r\n  //go back to menu\r\n  document\r\n    .querySelector(\".info--menuBtn\")\r\n    .addEventListener(\"click\", function() {\r\n      oxo.screens.loadScreen(\"home\", function() {\r\n      });\r\n    });\r\n}\r\n\r\n//life counter\r\nfunction displayLife(lifeNumber) {\r\n  livesEl.innerHTML = \"\";\r\n  for (var i = 0; i < lifeNumber; i++) {\r\n    livesEl.innerHTML += '<div class=\"heart\" />';\r\n  }\r\n}\r\n\r\nfunction setLinks() {\r\n  \r\n  document.querySelector(\".returnBtn\").addEventListener(\"click\", function() {\r\n    oxo.screens.loadScreen(\"home\", function() {\r\n    });\r\n  });\r\n}\r\n\r\n//lose when the map is burned\r\nvar countTiliBurned = 0;\r\n\r\nsetInterval(function() {\r\n  countTiliBurned = document.querySelectorAll(\".tile--burned\").length;\r\n  if (countTiliBurned > 138) {\r\n    //20% of the map\r\n    death();\r\n  }\r\n}, 5000);\r\n\r\nfunction death() {\r\n  oxo.screens.loadScreen(\"end\", setLinks);\r\n  oxo.player.getScore();\r\n  clearInterval(BadBoy.moveInterval);\r\n  clearInterval(BadBoy.changeDirectionInterval);\r\n  clearInterval(BadBoy.shootInterval);\r\n  BadBoy.oxoElement.remove();\r\n  destroyObj(BadBoy);\r\n}\r\n\r\n//SET objects to null\r\nfunction destroyObj(obj) {\r\n  obj = null;\r\n}"]}